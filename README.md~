# Odata2PG

Fonctions pl/pgsql de récupération des données d'ODK central vers une base de données PostgreSQL

PostgreSQL's functions to retreive datas from OData API to a PostgreSQL database 

## Exemple d'utilisation

```sql
SELECT outils.get_submission_from_odata(
	user_name,
	pass_word,
	central_fqdn,
	project,
	form,
	tablename,
    false,
	'__system%%2FsubmissionDate',
	'gt',
	'2020-10-01',
	'odk_central',
concat('form_',lower(form),'_',lower(split_part(tablename,'.',cardinality(regexp_split_to_array(tablename,'\.')))))
)
FROM outils.get_form_tables_list_from_odata('my_login','my_password','odata_server.mydomaine.org',	5,'Sicen','__system%%2FsubmissionDate','gt','2020-10-01');

SELECT outils.feed_data_tables_from_odata('odk_central',concat('form_',lower(form),'_',lower(split_part(tablename,'.',cardinality(regexp_split_to_array(tablename,'\.'))))))
FROM outils.get_form_tables_list_from_odata('my_login','my_password','odata_server.mydomaine.org',	5,'Sicen','__system%%2FsubmissionDate','gt','2020-10-01');
/*
SELECT * FROM odk_central.form_sicen_submissions_data;
SELECT * FROM odk_central.form_sicen_emplacements_data;
SELECT * FROM odk_central.form_sicen_observations_data;
*/
```

